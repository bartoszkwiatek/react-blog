(this["webpackJsonppersonal-page-client"]=this["webpackJsonppersonal-page-client"]||[]).push([[0],{289:function(e,t,a){e.exports=a.p+"static/media/headerimage.b13bf77f.jpg"},305:function(e,t,a){e.exports=a(345)},310:function(e,t,a){},317:function(e,t,a){},339:function(e,t,a){var n={"./1c":75,"./1c.js":75,"./abnf":76,"./abnf.js":76,"./accesslog":77,"./accesslog.js":77,"./actionscript":78,"./actionscript.js":78,"./ada":79,"./ada.js":79,"./angelscript":80,"./angelscript.js":80,"./apache":81,"./apache.js":81,"./applescript":82,"./applescript.js":82,"./arcade":83,"./arcade.js":83,"./arduino":84,"./arduino.js":84,"./armasm":85,"./armasm.js":85,"./asciidoc":87,"./asciidoc.js":87,"./aspectj":88,"./aspectj.js":88,"./autohotkey":89,"./autohotkey.js":89,"./autoit":90,"./autoit.js":90,"./avrasm":91,"./avrasm.js":91,"./awk":92,"./awk.js":92,"./axapta":93,"./axapta.js":93,"./bash":94,"./bash.js":94,"./basic":95,"./basic.js":95,"./bnf":96,"./bnf.js":96,"./brainfuck":97,"./brainfuck.js":97,"./c":99,"./c-like":98,"./c-like.js":98,"./c.js":99,"./cal":100,"./cal.js":100,"./capnproto":101,"./capnproto.js":101,"./ceylon":102,"./ceylon.js":102,"./clean":103,"./clean.js":103,"./clojure":104,"./clojure-repl":105,"./clojure-repl.js":105,"./clojure.js":104,"./cmake":106,"./cmake.js":106,"./coffeescript":107,"./coffeescript.js":107,"./coq":108,"./coq.js":108,"./cos":109,"./cos.js":109,"./cpp":110,"./cpp.js":110,"./crmsh":111,"./crmsh.js":111,"./crystal":112,"./crystal.js":112,"./csharp":113,"./csharp.js":113,"./csp":114,"./csp.js":114,"./css":115,"./css.js":115,"./d":116,"./d.js":116,"./dart":118,"./dart.js":118,"./delphi":119,"./delphi.js":119,"./diff":120,"./diff.js":120,"./django":121,"./django.js":121,"./dns":122,"./dns.js":122,"./dockerfile":123,"./dockerfile.js":123,"./dos":124,"./dos.js":124,"./dsconfig":125,"./dsconfig.js":125,"./dts":126,"./dts.js":126,"./dust":127,"./dust.js":127,"./ebnf":128,"./ebnf.js":128,"./elixir":129,"./elixir.js":129,"./elm":130,"./elm.js":130,"./erb":132,"./erb.js":132,"./erlang":134,"./erlang-repl":133,"./erlang-repl.js":133,"./erlang.js":134,"./excel":135,"./excel.js":135,"./fix":136,"./fix.js":136,"./flix":137,"./flix.js":137,"./fortran":138,"./fortran.js":138,"./fsharp":139,"./fsharp.js":139,"./gams":140,"./gams.js":140,"./gauss":141,"./gauss.js":141,"./gcode":142,"./gcode.js":142,"./gherkin":143,"./gherkin.js":143,"./glsl":144,"./glsl.js":144,"./gml":145,"./gml.js":145,"./go":146,"./go.js":146,"./golo":147,"./golo.js":147,"./gradle":148,"./gradle.js":148,"./groovy":149,"./groovy.js":149,"./haml":150,"./haml.js":150,"./handlebars":151,"./handlebars.js":151,"./haskell":152,"./haskell.js":152,"./haxe":153,"./haxe.js":153,"./hsp":154,"./hsp.js":154,"./htmlbars":155,"./htmlbars.js":155,"./http":156,"./http.js":156,"./hy":157,"./hy.js":157,"./inform7":158,"./inform7.js":158,"./ini":159,"./ini.js":159,"./irpf90":160,"./irpf90.js":160,"./isbl":161,"./isbl.js":161,"./java":162,"./java.js":162,"./javascript":163,"./javascript.js":163,"./jboss-cli":164,"./jboss-cli.js":164,"./json":165,"./json.js":165,"./julia":166,"./julia-repl":167,"./julia-repl.js":167,"./julia.js":166,"./kotlin":168,"./kotlin.js":168,"./lasso":169,"./lasso.js":169,"./latex":170,"./latex.js":170,"./ldif":171,"./ldif.js":171,"./leaf":172,"./leaf.js":172,"./less":173,"./less.js":173,"./lisp":174,"./lisp.js":174,"./livecodeserver":175,"./livecodeserver.js":175,"./livescript":176,"./livescript.js":176,"./llvm":177,"./llvm.js":177,"./lsl":178,"./lsl.js":178,"./lua":179,"./lua.js":179,"./makefile":180,"./makefile.js":180,"./markdown":117,"./markdown.js":117,"./mathematica":181,"./mathematica.js":181,"./matlab":182,"./matlab.js":182,"./maxima":183,"./maxima.js":183,"./mel":184,"./mel.js":184,"./mercury":185,"./mercury.js":185,"./mipsasm":186,"./mipsasm.js":186,"./mizar":187,"./mizar.js":187,"./mojolicious":189,"./mojolicious.js":189,"./monkey":190,"./monkey.js":190,"./moonscript":191,"./moonscript.js":191,"./n1ql":192,"./n1ql.js":192,"./nginx":193,"./nginx.js":193,"./nim":194,"./nim.js":194,"./nix":195,"./nix.js":195,"./node-repl":196,"./node-repl.js":196,"./nsis":197,"./nsis.js":197,"./objectivec":198,"./objectivec.js":198,"./ocaml":199,"./ocaml.js":199,"./openscad":200,"./openscad.js":200,"./oxygene":201,"./oxygene.js":201,"./parser3":202,"./parser3.js":202,"./perl":188,"./perl.js":188,"./pf":203,"./pf.js":203,"./pgsql":204,"./pgsql.js":204,"./php":205,"./php-template":206,"./php-template.js":206,"./php.js":205,"./plaintext":207,"./plaintext.js":207,"./pony":208,"./pony.js":208,"./powershell":209,"./powershell.js":209,"./processing":210,"./processing.js":210,"./profile":211,"./profile.js":211,"./prolog":212,"./prolog.js":212,"./properties":213,"./properties.js":213,"./protobuf":214,"./protobuf.js":214,"./puppet":215,"./puppet.js":215,"./purebasic":216,"./purebasic.js":216,"./python":217,"./python-repl":218,"./python-repl.js":218,"./python.js":217,"./q":219,"./q.js":219,"./qml":220,"./qml.js":220,"./r":221,"./r.js":221,"./reasonml":222,"./reasonml.js":222,"./rib":223,"./rib.js":223,"./roboconf":224,"./roboconf.js":224,"./routeros":225,"./routeros.js":225,"./rsl":226,"./rsl.js":226,"./ruby":131,"./ruby.js":131,"./ruleslanguage":227,"./ruleslanguage.js":227,"./rust":228,"./rust.js":228,"./sas":229,"./sas.js":229,"./scala":230,"./scala.js":230,"./scheme":231,"./scheme.js":231,"./scilab":232,"./scilab.js":232,"./scss":233,"./scss.js":233,"./shell":234,"./shell.js":234,"./smali":235,"./smali.js":235,"./smalltalk":236,"./smalltalk.js":236,"./sml":237,"./sml.js":237,"./sqf":238,"./sqf.js":238,"./sql":240,"./sql.js":240,"./sql_more":239,"./sql_more.js":239,"./stan":241,"./stan.js":241,"./stata":242,"./stata.js":242,"./step21":243,"./step21.js":243,"./stylus":244,"./stylus.js":244,"./subunit":245,"./subunit.js":245,"./swift":246,"./swift.js":246,"./taggerscript":247,"./taggerscript.js":247,"./tap":249,"./tap.js":249,"./tcl":250,"./tcl.js":250,"./thrift":251,"./thrift.js":251,"./tp":252,"./tp.js":252,"./twig":253,"./twig.js":253,"./typescript":254,"./typescript.js":254,"./vala":255,"./vala.js":255,"./vbnet":256,"./vbnet.js":256,"./vbscript":257,"./vbscript-html":258,"./vbscript-html.js":258,"./vbscript.js":257,"./verilog":259,"./verilog.js":259,"./vhdl":260,"./vhdl.js":260,"./vim":261,"./vim.js":261,"./x86asm":262,"./x86asm.js":262,"./xl":263,"./xl.js":263,"./xml":86,"./xml.js":86,"./xquery":264,"./xquery.js":264,"./yaml":248,"./yaml.js":248,"./zephir":265,"./zephir.js":265};function r(e){var t=c(e);return a(t)}function c(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=c,e.exports=r,r.id=339},345:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(286),s=a.n(c),l=(a(310),a(16)),o=a(381),i=(a(317),a(3)),u=r.a.createContext(),m={is_authinticated:!1,profile:null},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;return t.type,e},h=a(20),d={user_textChange:"",user_textSubmit:""},j=function(e,t){switch(t.type){case"USER_INPUT_CHANGE":return Object(h.a)(Object(h.a)({},e),{},{user_textChange:t.payload});case"USER_INPUT_SUBMIT":return Object(h.a)(Object(h.a)({},e),{},{user_textSubmit:t.payload});default:throw new Error}},f=a(360),b=a(367),g=a(27),E=a(15),v=a(11),y=a.n(v),x=a(24),w=a(385),k=a(297),O=a(50),S=a(287),C=a(288),T=a(298),_=a(296),A=a(268),P=a.n(A),z=(a(338),{}),N=function(e){Object(T.a)(n,e);var t=Object(_.a)(n);function n(e){var a;return Object(S.a)(this,n),(a=t.call(this,e)).highlight=function(){a.codeNode&&a.codeNode.current&&P.a.highlightBlock(a.codeNode.current)},a.state={loaded:!1},a.codeNode=r.a.createRef(),a}return Object(C.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.language;if(e&&!z[e])try{var t=a(339)("./".concat(e));P.a.registerLanguage(e,t),z[e]=!0,this.setState({loaded:!0},this.highlight)}catch(n){throw console.error(n),Error("Cannot register the language ".concat(e))}else this.setState({loaded:!0})}},{key:"componentDidUpdate",value:function(){this.highlight()}},{key:"render",value:function(){var e=this.props,t=e.language,a=e.children;return this.state.loaded?r.a.createElement("pre",{className:"rounded"},r.a.createElement("code",{ref:this.codeNode,className:t},a)):null}}]),n}(n.Component);N.defaultProps={language:"json"};var q=N,I=a(358),R=a(384),B=function(){return r.a.createElement(I.a,null,r.a.createElement(R.a,{thickness:"4px",speed:"0.65s",emptyColor:"gray.200",color:"teal.500",size:"xl"}))},U=O.apiOrigin,D=void 0===U?"http://localhost:3001":U,L=Object(l.c)((function(){var e=Object(n.useState)({showResult:!1,apiMessage:"",error:null}),t=Object(i.a)(e,2),a=t[0],c=t[1],s=Object(l.b)(),o=s.getAccessTokenSilently,u=s.loginWithPopup,m=s.getAccessTokenWithPopup,p=function(){var e=Object(x.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m();case 3:c(Object(h.a)(Object(h.a)({},a),{},{error:null})),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),c(Object(h.a)(Object(h.a)({},a),{},{error:e.t0.error}));case 9:return e.next=11,j();case 11:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=Object(x.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u();case 3:c(Object(h.a)(Object(h.a)({},a),{},{error:null})),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),c(Object(h.a)(Object(h.a)({},a),{},{error:e.t0.error}));case 9:return e.next=11,j();case 11:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=Object(x.a)(y.a.mark((function e(){var t,n,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o();case 3:return t=e.sent,e.next=6,fetch("".concat(D,"/api/external"),{headers:{Authorization:"Bearer ".concat(t)}});case 6:return n=e.sent,e.next=9,n.json();case 9:r=e.sent,c(Object(h.a)(Object(h.a)({},a),{},{showResult:!0,apiMessage:r})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),c(Object(h.a)(Object(h.a)({},a),{},{error:e.t0.error}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),f=function(e,t){e.preventDefault(),t()};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"mb-5"},"consent_required"===a.error&&r.a.createElement(w.a,{color:"warning"},"You need to"," ",r.a.createElement("a",{href:"#/",class:"alert-link",onClick:function(e){return f(e,p)}},"consent to get access to users api")),"login_required"===a.error&&r.a.createElement(w.a,{color:"warning"},"You need to"," ",r.a.createElement("a",{href:"#/",class:"alert-link",onClick:function(e){return f(e,d)}},"log in again")),r.a.createElement("h1",null,"External API"),r.a.createElement("p",null,"Ping an external API by clicking the button below. This will call the external API using an access token, and the API will validate it using the API's audience value."),r.a.createElement(k.a,{color:"primary",className:"mt-5",onClick:j},"Ping API")),r.a.createElement("div",{className:"result-block-container"},a.showResult&&r.a.createElement("div",{className:"result-block","data-testid":"api-result"},r.a.createElement("h6",{className:"muted"},"Result"),r.a.createElement(q,null,r.a.createElement("span",null,JSON.stringify(a.apiMessage,null,2))))))}),{onRedirecting:function(){return r.a.createElement(B,null)}}),M=a(359),H=a(361),W=a(362),F=a(363),J=function(){return r.a.createElement(M.a,{bg:"teal.500",p:2,h:"100px"},r.a.createElement(f.a,null,r.a.createElement(H.a,{align:"center"},r.a.createElement(W.a,{color:"white"},"Bartosz Kwiatek \ud83c\udf38 bkwiatek3@gmail.com"),r.a.createElement(F.a,null))))},G=a(366),Y=a(368),K=a(369),Q=a(289),$=a.n(Q),V=a(365),X=a(378),Z=a(364),ee=a(270),te=function(){var e=Object(l.b)(),t=e.user,a=e.isAuthenticated,n=e.loginWithRedirect,c=e.logout;return r.a.createElement(r.a.Fragment,null,!a&&r.a.createElement(k.a,{id:"qsLoginBtn",colorScheme:"teal",className:"btn-margin",onClick:function(){return n()}},"Log in"),a&&r.a.createElement(X.a,{positon:"absolute"},r.a.createElement(X.b,{as:k.a,colorScheme:"teal",height:"auto",width:"auto",p:0,borderRadius:"100%"},r.a.createElement(Z.a,{size:"md",name:t.name,alt:"Profile picture",src:t.picture}),r.a.createElement(Z.b,null,r.a.createElement(V.a,null))),r.a.createElement(X.f,null,r.a.createElement(X.d,{title:t.name},r.a.createElement(X.e,{icon:r.a.createElement(ee.a,{icon:"user",className:"mr-3"}),to:"/profile"},"Profile"),r.a.createElement(X.e,{onClick:function(){return c({returnTo:window.location.origin})},icon:r.a.createElement(ee.a,{icon:"power-off",className:"mr-3"})},"Log out")),r.a.createElement(X.c,null),r.a.createElement(X.d,{title:"Help"},r.a.createElement(X.e,null,"Docs"),r.a.createElement(X.e,null,"FAQ")))))},ae=function(){Object(n.useContext)(u);return r.a.createElement(r.a.Fragment,null,r.a.createElement(M.a,{bg:"teal.500",p:2},r.a.createElement(f.a,null,r.a.createElement(G.a,{as:"h1",size:"md"},r.a.createElement(H.a,{align:"center"},r.a.createElement(g.b,{to:"/",color:"white"},r.a.createElement(W.a,{color:"white"},"Greatest react blog ever.")),r.a.createElement(b.a,{marginLeft:4,h:"2.5rem",w:"3px",orientation:"vertical"}),r.a.createElement(F.a,null),r.a.createElement(te,null))))),r.a.createElement(M.a,{height:"14em",marginBottom:3},r.a.createElement(Y.a,{src:$.a,alt:"Flowers on a tree",fit:"cover",width:"100%",height:"100%"}),r.a.createElement(K.a,{style:{float:"right",position:"relative",bottom:"3em",right:"2em",opacity:"80%"}},r.a.createElement(K.b,null,"Photo by ",r.a.createElement("a",{href:"https://unsplash.com/@_entreprenerd?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText"},"Arno Smit")," on ",r.a.createElement("a",{href:"https://unsplash.com/?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText"},"Unsplash")))))},ne=a(386),re=function(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),a=(t[0],t[1],Object(l.b)()),c=(a.user,a.getAccessTokenSilently,a.isAuthenticated),s=a.getAccessTokenWithPopup,o=(a.loginWithRedirect,a.logout,function(){var e=Object(x.a)(y.a.mark((function e(){var t,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s({audience:"react-blog-api",scope:"read:posts"});case 2:return t=e.sent,e.next=5,fetch("http://localhost:3001/api/timesheets",{method:"POST",cache:"no-cache",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},referrerPolicy:"no-referrer",body:JSON.stringify({data:"xd"})});case 5:return a=e.sent,e.abrupt("return",a.json());case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}());return r.a.createElement("nav",null,r.a.createElement(ne.a,{spacing:"4"},r.a.createElement(g.b,{to:"/",activeclassname:"router-link-exact-active"},r.a.createElement(k.a,{colorScheme:"teal",size:"lg"},"Home")),r.a.createElement(g.b,{to:"/profile"},r.a.createElement(k.a,{colorScheme:"teal",size:"lg"},"Profile")),c&&r.a.createElement(k.a,{colorScheme:"teal",size:"lg",onClick:function(){return console.log(o())}},"External API")))},ce=a(370),se=a(379),le=function(e){return r.a.createElement(H.a,{lineHeight:"1rem",height:"1rem"},r.a.createElement(M.a,{mr:"1",textAlign:"right"},r.a.createElement(W.a,{size:"sm"},e.author),r.a.createElement(W.a,{fontSize:"xs"},e.author)),r.a.createElement(Z.a,{size:"sm",src:e.src}))},oe=function(e){if(!e.ok)throw Error(e.statusText);return e},ie=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=Object(n.useState)(null),r=Object(i.a)(a,2),c=r[0],s=r[1],l=Object(n.useState)(!1),o=Object(i.a)(l,2),u=o[0],m=o[1],p=Object(n.useState)([]),h=Object(i.a)(p,2),d=h[0],j=h[1];return Object(n.useEffect)((function(){m(!1),fetch(e).then(oe).then((function(e){return e.json()})).then((function(e){j(e),m(!0)})).catch((function(e){s(e),m(!0)}))}),[e,t]),{isLoaded:u,items:d,error:c}},ue=function(e){var t=e.match,a=ie("/api/posts"),n=a.isLoaded,c=a.items,s=a.error;return s?r.a.createElement(f.a,null,r.a.createElement(W.a,{as:"h3"},"Could not connect to the database"),r.a.createElement(W.a,{as:"h4"},s.message)):n?r.a.createElement("ul",null,c.map((function(e){return r.a.createElement(g.b,{to:"".concat(t.url,"posts/").concat(e._id),key:e._id},r.a.createElement(ce.a,{as:"article",p:"5",marginBottom:"5",borderWidth:"1px",rounded:"md"},r.a.createElement(H.a,{justifyContent:"space-between"},r.a.createElement(M.a,{as:"time",size:"sm",dateTime:e.createdAt},Object(se.a)(new Date(e.createdAt),"dd.MM.yyyy HH:mm")),r.a.createElement(le,{author:e.author,src:""})),r.a.createElement(G.a,{size:"md",my:"2"},e.title),r.a.createElement(W.a,{style:{whiteSpace:"pre-wrap"},dangerouslySetInnerHTML:{__html:"".concat(e.shortContent,"... <b>read more</b>")}})))}))):r.a.createElement(B,null)},me=function(e){return console.log("test"),r.a.createElement(ue,{match:e.match})},pe=function(e){return r.a.createElement(M.a,{as:"article",p:"5",marginBottom:"5",borderWidth:"1px",rounded:"md"},r.a.createElement(H.a,{justifyContent:"space-between"},r.a.createElement(M.a,{as:"time",dateTime:e.date},Object(se.a)(new Date(e.date),"dd.MM.yyyy HH:mm")),r.a.createElement(le,{author:e.author,src:""})),r.a.createElement(G.a,{size:"md",my:"2"},e.title),r.a.createElement(W.a,{style:{whiteSpace:"pre-wrap"},dangerouslySetInnerHTML:{__html:"".concat(e.content)}}),r.a.createElement(g.b,{to:"/"},"Back"))},he=function(e){var t=e.match,a="/api/posts/".concat(t.params._id),n=ie(a),c=n.isLoaded,s=n.items,l=n.error;return l?r.a.createElement(f.a,null,r.a.createElement(W.a,{as:"h3"},"Could not connect to the database"),r.a.createElement(W.a,{as:"h4"},l.message)):c?r.a.createElement(pe,{date:s.createdAt,title:s.title,content:s.longContent,author:s.author}):r.a.createElement(B,null)},de=a(387),je=a(373),fe=a(371),be=a(372),ge=function(e){var t=Object(l.b)(),a=t.user,c=t.getAccessTokenSilently,s=Object(n.useState)(e.item.title),o=Object(i.a)(s,2),u=o[0],m=o[1],p=Object(n.useState)(e.item.longContent),h=Object(i.a)(p,2),d=h[0],j=h[1],f=Object(n.useState)(e.item._id),g=Object(i.a)(f,2),E=g[0],v=(g[1],function(e){switch(e.target.id){case"edit-post-title":m(e.target.value);break;case"edit-post-content":j(e.target.value)}});var w=function(){var e=Object(x.a)(y.a.mark((function e(t,a){var n,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c({audience:"react-blog-api",scope:"edit:posts"});case 2:return n=e.sent,e.next=5,fetch(t,{method:"PUT",cache:"no-cache",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify(a),referrerPolicy:"no-referrer"});case 5:return r=e.sent,e.abrupt("return",r.json());case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),O={title:u,shortContent:d.slice(0,120),longContent:d,author:a.nickname};return r.a.createElement(r.a.Fragment,null,r.a.createElement(ne.b,{spacing:2,align:"flex-end"},r.a.createElement(fe.a,{isRequired:!0,id:"edit-post-title",value:u,onChange:v,placeholder:"Title of new post",size:"lg"}),r.a.createElement(be.a,{isRequired:!0,id:"edit-post-content",value:d,onChange:v,placeholder:"Post content",size:"md",resize:"vertical",height:"200px"}),r.a.createElement(k.a,{disabled:!u||!d,onClick:Object(x.a)(y.a.mark((function t(){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w("api/posts/".concat(E),O);case 2:e.refresh(),a=3,e.handleTabsChange(a);case 4:case"end":return t.stop()}var a}),t)}))),colorScheme:"blue","aria-label":"save",title:"update",rightIcon:r.a.createElement(je.a,null)},"Update")),r.a.createElement(b.a,{margin:"2rem 0 2rem 0",orientation:"horizontal"}),r.a.createElement(W.a,{as:"h3"},"Preview:"),r.a.createElement(pe,{date:new Date,title:u,content:d,author:a.nickname}))},Ee=a(374),ve=function(e){var t=Object(l.b)(),a=t.user,c=t.getAccessTokenSilently,s=Object(n.useState)(""),o=Object(i.a)(s,2),u=o[0],m=o[1],p=Object(n.useState)(""),h=Object(i.a)(p,2),d=h[0],j=h[1],f=function(e){switch(e.target.id){case"new-post-title":m(e.target.value);break;case"new-post-content":j(e.target.value)}},g=function(){var e=Object(x.a)(y.a.mark((function e(t,a){var n,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c({audience:"react-blog-api",scope:"add:posts"});case 2:return n=e.sent,e.next=5,fetch(t,{method:"POST",cache:"no-cache",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},referrerPolicy:"no-referrer",body:JSON.stringify(a)});case 5:return r=e.sent,e.abrupt("return",r.json());case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),E={title:u,shortContent:d.slice(0,120),longContent:d,author:a.nickname};return r.a.createElement(r.a.Fragment,null,r.a.createElement(ne.b,{spacing:2,align:"flex-end"},r.a.createElement(fe.a,{isRequired:!0,id:"new-post-title",value:u,onChange:f,placeholder:"Title of new post",size:"lg"}),r.a.createElement(be.a,{isRequired:!0,id:"new-post-content",value:d,onChange:f,placeholder:"Post content",size:"md",resize:"vertical",height:"200px"}),r.a.createElement(k.a,{disabled:!u||!d,onClick:Object(x.a)(y.a.mark((function t(){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g("/api/posts",E);case 2:e.refresh(),a=3,e.handleTabsChange(a);case 4:case"end":return t.stop()}var a}),t)}))),colorScheme:"teal","aria-label":"save",title:"save",rightIcon:r.a.createElement(Ee.a,null)},"Add")),r.a.createElement(b.a,{margin:"2rem 0 2rem 0",orientation:"horizontal"}),r.a.createElement(W.a,{as:"h3"},"Preview:"),r.a.createElement(pe,{date:new Date,title:u,content:d,author:a.nickname}))},ye=a(376),xe=a(375),we=function(e){var t=Object(l.b)(),a=(t.user,t.getAccessTokenSilently),n=e.items,c=function(){var e=Object(x.a)(y.a.mark((function e(t){var n,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a({audience:"react-blog-api",scope:"delete:posts"});case 2:return n=e.sent,e.next=5,fetch(t,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},referrerPolicy:"no-referrer"});case 5:return r=e.sent,e.abrupt("return",r.json());case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("ul",null,n.map((function(t){return r.a.createElement(M.a,{key:t._id,as:"article",p:"5",marginBottom:"5",borderWidth:"1px",rounded:"md"},r.a.createElement(H.a,null,r.a.createElement(M.a,{w:"100%"},r.a.createElement(H.a,{justifyContent:"space-between"},r.a.createElement(M.a,{as:"time",size:"sm",dateTime:t.createdAt},Object(se.a)(new Date(t.createdAt),"dd.MM.yyyy HH:mm")),r.a.createElement(le,{author:t.author,src:""})),r.a.createElement(G.a,{size:"md",my:"2"},t.title),r.a.createElement(W.a,{style:{whiteSpace:"pre-wrap"}},t.shortContent)),r.a.createElement(F.a,null),r.a.createElement(ne.b,{borderLeft:"solid 1px",borderColor:"gray.200",pl:"1rem",ml:"1rem",variant:"outline",fontSize:"20",spacing:"3"},r.a.createElement(xe.a,{onClick:function(){return function(t){e.handleEditButton(t)}(t)},colorScheme:"blue","aria-label":"edit",title:"edit",icon:r.a.createElement(je.a,null)}),r.a.createElement(xe.a,{onClick:Object(x.a)(y.a.mark((function a(){return y.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,c("api/posts/".concat(t._id));case 2:e.refresh(),n=3,e.handleTabsChange(n);case 4:case"end":return a.stop()}var n}),a)}))),colorScheme:"red","aria-label":"delete",title:"delete",icon:r.a.createElement(ye.a,null)}))))}))))},ke=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{src:e.user.picture,alt:"Profile",className:"rounded-circle img-fluid profile-picture mb-3 mb-md-0"}),r.a.createElement("h2",null,e.user.nickname),r.a.createElement("h2",null,e.user.name),r.a.createElement("p",{className:"lead text-muted"},e.user.email),r.a.createElement(q,null,JSON.stringify(e.user,null,2)))},Oe=Object(l.c)((function(e){e.match;var t=Object(l.b)(),a=t.user;t.getAccessTokenSilently;console.log(a.app_metadata);var c=Object(n.useState)({}),s=Object(i.a)(c,2),o=s[0],u=s[1],m=Object(n.useState)(""),p=Object(i.a)(m,2),h=p[0],d=p[1],j=Object(n.useState)(0),b=Object(i.a)(j,2),g=b[0],E=b[1],v=ie("/api/posts",g),y=v.isLoaded,x=v.items,w=v.error,k=Object(n.useState)(0),O=Object(i.a)(k,2),S=O[0],C=O[1];function T(){E(g+1),d("")}var _=function(e){C(e),2!==e&&d("")};return w?r.a.createElement(f.a,null,r.a.createElement(W.a,{as:"h3"},"Could not connect to the database"),r.a.createElement(W.a,{as:"h4"},w.message)):y?r.a.createElement(r.a.Fragment,null,r.a.createElement(de.e,{index:S,onChange:_,variant:"line",colorScheme:"teal",isLazy:!0},r.a.createElement(de.b,null,r.a.createElement(de.a,null,"Profile"),r.a.createElement(de.a,null,"New post"),r.a.createElement(de.a,{isDisabled:""===h,_disabled:{cursor:"inherit",opacity:"0.4"}},"Edit post"),r.a.createElement(de.a,null,"Posts list")),r.a.createElement(de.d,null,r.a.createElement(de.c,null,r.a.createElement(ke,{user:a})),r.a.createElement(de.c,null,r.a.createElement(ve,{refresh:T,handleTabsChange:function(e){return _(e)}})),r.a.createElement(de.c,null,r.a.createElement(ge,{item:o,refresh:T,handleTabsChange:function(e){return _(e)}})),r.a.createElement(de.c,null,r.a.createElement(we,{handleEditButton:function(e){return function(e){u(e),d(e.id),_(2)}(e)},items:x,refresh:T,handleTabsChange:function(e){return _(e)}}))))):r.a.createElement(B,null)}),{onRedirecting:function(){return r.a.createElement(B,null)}}),Se=function(){Object(n.useContext)(u);return r.a.createElement(g.a,null,r.a.createElement(ae,null),r.a.createElement(f.a,{className:"App"},r.a.createElement(re,null),r.a.createElement("br",null),r.a.createElement(E.c,null,r.a.createElement(E.a,{exact:!0,path:"/",component:me}),r.a.createElement(E.a,{path:"/posts/:_id",component:he}),r.a.createElement(E.a,{path:"/profile",component:Oe}),r.a.createElement(E.a,{path:"/external-api",component:L}),r.a.createElement(E.a,{path:"/callback",render:function(e){}}))),r.a.createElement("br",null),r.a.createElement(b.a,null),r.a.createElement("br",null),r.a.createElement(J,null))},Ce=function(){var e=Object(n.useReducer)(p,m),t=Object(i.a)(e,2),a=t[0],c=(t[1],Object(n.useReducer)(j,d)),s=Object(i.a)(c,2),l=s[0],o=s[1];return r.a.createElement(u.Provider,{value:{useContextChangeState:l.user_textChange,useContextSubmitState:l.user_textSubmit,useContextSubmit:function(e){return function(e){e.preventDefault(),e.persist(),o({type:"USER_INPUT_SUBMIT",payload:e.target.useContext.value})}(e)},useContextChange:function(e){return function(e){o({type:"USER_INPUT_CHANGE",payload:e.target.value})}(e)},authState:a.is_authenticated,profileState:a.profile,handleAuth:function(e){return function(e){e.location.hash}(e)}}},r.a.createElement(Se,null))},Te=a(35),_e=a(70);(function(){Te.b.add(_e.a),Te.b.add(_e.c),Te.b.add(_e.b)})();var Ae=function(){var e=Object(l.b)(),t=e.isLoading,a=e.error;return a?r.a.createElement("div",null,"Oops... ",a.message):t?r.a.createElement(o.a,{size:"xs",colorScheme:"teal",isIndeterminate:!0}):r.a.createElement(Ce,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Pe=a(380),ze=a(292),Ne=Object(ze.a)(),qe=a(377),Ie=Object(qe.a)({components:{Container:{baseStyle:{maxWidth:"80ch"}},Tab:{_disabled:{color:"pink"}},Button:{baseStyle:{colorScheme:"teal"},focus:{outline:"3px solid pink"}}},colors:{brand:{100:"#f7fafc",900:"#1a202c"}}});s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(l.a,{domain:O.domain,clientId:O.clientId,redirectUri:window.location.origin,onRedirectCallback:function(e){Ne.push(e&&e.returnTo?e.returnTo:window.location.pathname)}},r.a.createElement(Pe.a,{theme:Ie},r.a.createElement(Ae,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},50:function(e){e.exports=JSON.parse('{"domain":"kwiaciu.eu.auth0.com","clientId":"eJD1pcPrJAYW48mACtxWt9bkl5OD37ec"}')}},[[305,1,2]]]);
//# sourceMappingURL=main.dde80a93.chunk.js.map