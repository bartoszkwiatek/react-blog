(this["webpackJsonppersonal-page-client"]=this["webpackJsonppersonal-page-client"]||[]).push([[0],{81:function(e,t,a){e.exports=a(94)},86:function(e,t,a){},87:function(e,t,a){},94:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(69),l=a.n(c),o=(a(86),a(87),a(3)),u=r.a.createContext(),i=a(15),s={is_authinticated:!1,profile:null},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_SUCCESS":return Object(i.a)(Object(i.a)({},e),{},{is_authinticated:!0});case"LOGIN_FAILURE":return Object(i.a)(Object(i.a)({},e),{},{is_authinticated:!1});case"ADD_PROFILE":return Object(i.a)(Object(i.a)({},e),{},{profile:t.payload});case"REMOVE_PROFILE":return Object(i.a)(Object(i.a)({},e),{},{profile:null});default:return e}},p={user_textChange:"",user_textSubmit:""},E=function(e,t){switch(t.type){case"USER_INPUT_CHANGE":return Object(i.a)(Object(i.a)({},e),{},{user_textChange:t.payload});case"USER_INPUT_SUBMIT":return Object(i.a)(Object(i.a)({},e),{},{user_textSubmit:t.payload});default:throw new Error}},f=a(7),h=a(102),d=a(103),b=a(104),O=a(76),g=a(23),j=function(){var e=Object(n.useContext)(u);return r.a.createElement(h.a,null,r.a.createElement(d.a,null,r.a.createElement(g.a,{to:"/"},r.a.createElement("header",null,r.a.createElement("h1",null,"Greatest react blog ever")))),r.a.createElement("nav",null,r.a.createElement(b.a,{spacing:"4"},r.a.createElement(g.a,{to:"/"},r.a.createElement(O.a,{colorScheme:"teal",size:"lg"},"Home")),r.a.createElement(g.a,{to:"/profile"},r.a.createElement(O.a,{colorScheme:"teal",size:"lg"},"Profile")),r.a.createElement(g.a,{to:"/privateroute"},r.a.createElement(O.a,{colorScheme:"teal",size:"lg"},"Private Route")),e.authState?r.a.createElement(O.a,{onClick:function(){return e.authObj.logout()}},"Logout"):r.a.createElement(O.a,{onClick:function(){return e.authObj.login()}},"Login"))))},v=function(e){var t=e.match,a=Object(n.useState)(null),c=Object(o.a)(a,2),l=c[0],u=c[1],i=Object(n.useState)(!1),s=Object(o.a)(i,2),m=s[0],p=s[1],E=Object(n.useState)([]),f=Object(o.a)(E,2),h=f[0],b=f[1];return Object(n.useEffect)((function(){fetch("/api/posts").then((function(e){return e.json()})).then((function(e){p(!0),b(e)}),(function(e){p(!0),u(e)}))}),[]),l?r.a.createElement("div",null,"Error: ",l.message):m?r.a.createElement("ul",null,h.map((function(e){return r.a.createElement(d.a,{margin:"4",padding:"2",bg:"gray.100",border:"1px",borderRadius:"md",key:e._id},r.a.createElement(g.a,{to:"".concat(t.url,"posts/").concat(e._id)},r.a.createElement("li",null,r.a.createElement("h2",null,e.title),r.a.createElement("p",null,e.shortContent))))}))):r.a.createElement("div",null,"Loading...")},S=function(e){return r.a.createElement(v,{match:e.match})},C=function(e){var t=e.match;console.log("".concat(t.url));var a=function(e){var t=Object(n.useState)(null),a=Object(o.a)(t,2),r=a[0],c=a[1],l=Object(n.useState)(!1),u=Object(o.a)(l,2),i=u[0],s=u[1],m=Object(n.useState)([]),p=Object(o.a)(m,2),E=p[0],f=p[1];return Object(n.useEffect)((function(){fetch(e).then((function(e){return e.json()})).then((function(e){s(!0),f(e)}),(function(e){s(!0),c(e)}))}),[e]),r?r.message:i?E:"loading"}("/api/posts/".concat(t.params._id));return console.log(a),r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,{margin:"4",padding:"2",bg:"gray.100",border:"1px",borderRadius:"md"},r.a.createElement("h2",null,a.title),r.a.createElement("h6",null,a.createdAt),r.a.createElement("p",{style:{whiteSpace:"pre-wrap"}},a.longContent),r.a.createElement(g.a,{to:"/"},"Back")))},_=a(39),x=a.n(_),y=a(51),R=a(109),w=a(113),U=a(114),k=a(105),I=a(107),L=a(108),P=a(110),W=a(111),A=a(112),N=a(73),z=function(e){e.match;var t=Object(n.useState)(null),a=Object(o.a)(t,2),c=a[0],l=a[1],u=Object(n.useState)(!1),i=Object(o.a)(u,2),s=i[0],m=i[1],p=Object(n.useState)([]),E=Object(o.a)(p,2),f=E[0],b=E[1],O=Object(n.useState)(""),g=Object(o.a)(O,2),j=g[0],v=g[1],S=Object(n.useState)(""),C=Object(o.a)(S,2),_=C[0],z=C[1],F=function(){var e=Object(y.a)(x.a.mark((function e(t,a){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{method:"POST",cache:"no-cache",headers:{"Content-Type":"application/json",Authorization:"Basic YWRtaW5AYWRtaW4uY29tOmFkbWlu"},referrerPolicy:"no-referrer",body:JSON.stringify(a)});case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),T=function(){var e=Object(y.a)(x.a.mark((function e(t){var a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{method:"DELETE",headers:{Authorization:"Basic YWRtaW5AYWRtaW4uY29tOmFkbWlu"},referrerPolicy:"no-referrer"});case 2:return a=e.sent,e.abrupt("return",a.json());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function B(){window.location.reload(!1)}var G={title:j,shortContent:_.slice(0,120),longContent:_};return Object(n.useEffect)((function(){fetch("/api/posts").then((function(e){return e.json()})).then((function(e){m(!0),b(e)}),(function(e){m(!0),l(e)}))}),[]),c?r.a.createElement("div",null,"Error: ",c.message):s?r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{maxW:"xl",centerContent:!0},r.a.createElement(k.a,{isRequired:!0,value:j,onChange:function(e){return v(e.target.value)},placeholder:"Title of new post",size:"md"}),r.a.createElement(I.a,{isRequired:!0,value:_,onChange:function(e){return z(e.target.value)},placeholder:"Post content",size:"md",resize:"vertical"}),r.a.createElement(L.a,{disabled:!j||!_,onClick:function(){F("/api/posts",G),B()},variant:"outline",colorScheme:"teal","aria-label":"save",fontSize:"20px",icon:r.a.createElement(R.a,null)})),r.a.createElement(h.a,{maxW:"xl",centerContent:!0},r.a.createElement(P.a,{mb:"8px"},j),r.a.createElement(P.a,{mb:"8px",style:{whiteSpace:"pre-wrap"}},_)),r.a.createElement("ul",null,f.map((function(e){return r.a.createElement(d.a,{margin:"1",padding:"1",border:"1px",borderRadius:"sm",key:e._id},r.a.createElement(W.a,{align:"center"},r.a.createElement(d.a,{margin:"1",padding:"1"},r.a.createElement("h2",null,e.title),r.a.createElement("p",null,e.shortContent)),r.a.createElement(A.a,null),r.a.createElement(N.a,{variant:"outline",fontSize:"20",spacing:"2"},r.a.createElement(L.a,{onClick:function(){alert("Nothing happened!")},colorScheme:"teal","aria-label":"delete",icon:r.a.createElement(w.a,null)}),r.a.createElement(L.a,{onClick:function(){T("api/posts/".concat(e._id)),B()},colorScheme:"red","aria-label":"delete",icon:r.a.createElement(U.a,null)}))))})))):r.a.createElement("div",null,"Loading...")},F=a(75),T=Object(F.a)(),B=function(){Object(n.useContext)(u);return r.a.createElement("div",null,r.a.createElement(f.b,{history:T},r.a.createElement(j,null),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(f.c,null,r.a.createElement(f.a,{exact:!0,path:"/",component:S}),r.a.createElement(f.a,{path:"/posts/:_id",component:C}),r.a.createElement(f.a,{path:"/profile",component:z}),r.a.createElement(f.a,{path:"/callback",render:function(e){}})))))},G=function(){var e=Object(n.useReducer)(m,s),t=Object(o.a)(e,2),a=t[0],c=t[1],l=Object(n.useReducer)(E,p),i=Object(o.a)(l,2),f=i[0],h=i[1];return r.a.createElement(u.Provider,{value:{useContextChangeState:f.user_textChange,useContextSubmitState:f.user_textSubmit,useContextSubmit:function(e){return function(e){e.preventDefault(),e.persist(),h({type:"USER_INPUT_SUBMIT",payload:e.target.useContext.value})}(e)},useContextChange:function(e){return function(e){h({type:"USER_INPUT_CHANGE",payload:e.target.value})}(e)},authState:a.is_authenticated,profileState:a.profile,handleUserLogin:function(){c({type:"LOGIN_SUCCESS"})},handleUserLogout:function(){c({type:"LOGIN_FAILURE"})},handleUserAddProfile:function(e){return function(e){c(function(e){return{type:"ADD_PROFILE",payload:e}}(e))}(e)},handleUserRemoveProfile:function(){c({type:"REMOVE_PROFILE"})},handleAuth:function(e){return function(e){e.location.hash}(e)}}},r.a.createElement(B,null))};var D=function(){return r.a.createElement(G,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Y=a(115);l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Y.a,null,r.a.createElement(D,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[81,1,2]]]);
//# sourceMappingURL=main.04a80e51.chunk.js.map